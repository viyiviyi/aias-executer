version: '3.8'  
  
services:  
  aias-executor:  
    build:  
      context: .  
      dockerfile: Dockerfile
    image: aias-executor
    container_name: aias-executor  
    restart: unless-stopped  
    ports:  
      - "23777:23777"  # 生产版本API
      # - "23769:23769"  # 开发版本API
      - "8080:8080"    # FileBrowser文件浏览器
    environment:  
      - NODE_ENV=production  
      - TZ=Asia/Shanghai  
    volumes:  
      # 配置文件目录  
      - ./config:/app/config  
      - ./workspace:/app/workspace
      # 挂载源代码到/workspace目录，用于开发版本
      - ./:/workspace
    working_dir: /app  

    # 日志配置  
    logging:  
      driver: "json-file"  
      options:  
        max-size: "10m"  
        max-file: "3"  
    # 网络配置  
    networks:  
      - aias-network  
  
networks:  
  aias-network:  
    driver: bridge 